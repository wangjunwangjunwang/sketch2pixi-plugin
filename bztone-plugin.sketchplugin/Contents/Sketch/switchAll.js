var that=this;function __skpm_run(e,t){that.context=t;var r=function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./src/switchAll.js")}({"./node_modules/@skpm/fs/index.js":
/*!****************************************!*\
  !*** ./node_modules/@skpm/fs/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,r){var n=r(/*! buffer */"buffer").Buffer;function a(e,t){return e&&e.encoding?String(e.encoding):e?String(e):t}e.exports.constants={F_OK:0,R_OK:4,W_OK:2,X_OK:1},e.exports.accessSync=function(t,r){r|=0;var n=NSFileManager.defaultManager();switch(r){case 0:canAccess=e.exports.existsSync(t);break;case 1:canAccess=Boolean(Number(n.isExecutableFileAtPath(t)));break;case 2:canAccess=Boolean(Number(n.isWritableFileAtPath(t)));break;case 3:canAccess=Boolean(Number(n.isExecutableFileAtPath(t)))&&Boolean(Number(n.isWritableFileAtPath(t)));break;case 4:canAccess=Boolean(Number(n.isReadableFileAtPath(t)));break;case 5:canAccess=Boolean(Number(n.isReadableFileAtPath(t)))&&Boolean(Number(n.isExecutableFileAtPath(t)));break;case 6:canAccess=Boolean(Number(n.isReadableFileAtPath(t)))&&Boolean(Number(n.isWritableFileAtPath(t)));break;case 7:canAccess=Boolean(Number(n.isReadableFileAtPath(t)))&&Boolean(Number(n.isWritableFileAtPath(t)))&&Boolean(Number(n.isExecutableFileAtPath(t)))}if(!canAccess)throw new Error("Can't access "+String(t))},e.exports.appendFileSync=function(t,r,i){if(!e.exports.existsSync(t))return e.exports.writeFileSync(t,r,i);var o=NSFileHandle.fileHandleForWritingAtPath(t);o.seekToEndOfFile();var l=a(i,"utf8"),c=n.from(r,"NSData"===l||"buffer"===l?void 0:l).toNSData();o.writeData(c)},e.exports.chmodSync=function(e,t){var r=MOPointer.alloc().init();if(NSFileManager.defaultManager().setAttributes_ofItemAtPath_error({NSFilePosixPermissions:t},e,r),null!==r.value())throw new Error(r.value())},e.exports.copyFileSync=function(e,t,r){var n=MOPointer.alloc().init();if(NSFileManager.defaultManager().copyItemAtPath_toPath_error(e,t,n),null!==n.value())throw new Error(n.value())},e.exports.existsSync=function(e){var t=NSFileManager.defaultManager();return Boolean(Number(t.fileExistsAtPath(e)))},e.exports.linkSync=function(e,t){var r=MOPointer.alloc().init();if(NSFileManager.defaultManager().linkItemAtPath_toPath_error(e,t,r),null!==r.value())throw new Error(r.value())},e.exports.mkdirSync=function(e,t){t=t||511;var r=MOPointer.alloc().init();if(NSFileManager.defaultManager().createDirectoryAtPath_withIntermediateDirectories_attributes_error(e,!1,{NSFilePosixPermissions:t},r),null!==r.value())throw new Error(r.value())},e.exports.mkdtempSync=function(t){var r=t+function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<6;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return e.exports.mkdirSync(r),r},e.exports.readdirSync=function(e){for(var t=NSFileManager.defaultManager().subpathsAtPath(e),r=[],n=0;n<t.length;n++)r.push(String(t[n]));return r},e.exports.readFileSync=function(e,t){var r=a(t,"buffer"),i=NSFileManager.defaultManager().contentsAtPath(e),o=n.from(i);return"buffer"===r?o:"NSData"===r?o.toNSData():o.toString(r)},e.exports.readlinkSync=function(e){var t=MOPointer.alloc().init(),r=NSFileManager.defaultManager().destinationOfSymbolicLinkAtPath_error(e,t);if(null!==t.value())throw new Error(t.value());return String(r)},e.exports.realpathSync=function(e){return String(NSString.stringByResolvingSymlinksInPath(e))},e.exports.renameSync=function(e,t){var r=MOPointer.alloc().init();if(NSFileManager.defaultManager().moveItemAtPath_toPath_error(e,t,r),null!==r.value())throw new Error(r.value())},e.exports.rmdirSync=function(e){var t=MOPointer.alloc().init();if(NSFileManager.defaultManager().removeItemAtPath_error(e,t),null!==t.value())throw new Error(t.value())},e.exports.statSync=function(e){var t=MOPointer.alloc().init(),r=NSFileManager.defaultManager().attributesOfItemAtPath_error(e,t);if(null!==t.value())throw new Error(t.value());return{dev:String(r.NSFileDeviceIdentifier),mode:r.NSFileType|r.NSFilePosixPermissions,nlink:Number(r.NSFileReferenceCount),uid:String(r.NSFileOwnerAccountID),gid:String(r.NSFileGroupOwnerAccountID),size:Number(r.NSFileSize),atimeMs:1e3*Number(r.NSFileModificationDate.timeIntervalSince1970()),mtimeMs:1e3*Number(r.NSFileModificationDate.timeIntervalSince1970()),ctimeMs:1e3*Number(r.NSFileModificationDate.timeIntervalSince1970()),birthtimeMs:1e3*Number(r.NSFileCreationDate.timeIntervalSince1970()),atime:new Date(1e3*Number(r.NSFileModificationDate.timeIntervalSince1970())+.5),mtime:new Date(1e3*Number(r.NSFileModificationDate.timeIntervalSince1970())+.5),ctime:new Date(1e3*Number(r.NSFileModificationDate.timeIntervalSince1970())+.5),birthtime:new Date(1e3*Number(r.NSFileCreationDate.timeIntervalSince1970())+.5),isBlockDevice:function(){return r.NSFileType===NSFileTypeBlockSpecial},isCharacterDevice:function(){return r.NSFileType===NSFileTypeCharacterSpecial},isDirectory:function(){return r.NSFileType===NSFileTypeDirectory},isFIFO:function(){return!1},isFile:function(){return r.NSFileType===NSFileTypeRegular},isSocket:function(){return r.NSFileType===NSFileTypeSocket},isSymbolicLink:function(){return r.NSFileType===NSFileTypeSymbolicLink}}},e.exports.symlinkSync=function(e,t){var r=MOPointer.alloc().init();NSFileManager.defaultManager().createSymbolicLinkAtPath_withDestinationPath_error(t,e,r);if(null!==r.value())throw new Error(r.value())},e.exports.truncateSync=function(e,t){var r=NSFileHandle.fileHandleForUpdatingAtPath(sFilePath);r.truncateFileAtOffset(t||0),r.closeFile()},e.exports.unlinkSync=function(e){var t=MOPointer.alloc().init();NSFileManager.defaultManager().removeItemAtPath_error(e,t);if(null!==t.value())throw new Error(t.value())},e.exports.utimesSync=function(e,t,r){var n=MOPointer.alloc().init();NSFileManager.defaultManager().setAttributes_ofItemAtPath_error({NSFileModificationDate:t},e,n);if(null!==n.value())throw new Error(n.value())},e.exports.writeFileSync=function(e,t,r){var i=a(r,"utf8");n.from(t,"NSData"===i||"buffer"===i?void 0:i).toNSData().writeToFile_atomically(e,!0)}},"./src/switchAll.js":
/*!**************************!*\
  !*** ./src/switchAll.js ***!
  \**************************/
/*! exports provided: default */function(e,t,r){"use strict";r.r(t);var n=r(/*! @skpm/fs */"./node_modules/@skpm/fs/index.js"),a=r(/*! ./util */"./src/util.js"),i=r(/*! sketch/ui */"sketch/ui"),o=[MSTextLayer,MSRectangleShape,MSBitmapLayer,MSLayerGroup,MSHotspotLayer],l={screen:{width:1920,height:1080},background:"",backgroundColor:"0xFFFFFF",bgScale:1.25,res:[],eases:{moveIn:"easeOutCubic",moveOut:"easeInCubic",zoomIn:"easeInCubic",zoomOut:"easeOutCubic"},fonts:[{name:"Didot-Bold",src:"http://yun.media.bztone.com/prezi/asensio/font/Didot-Bold.ttf"},{name:"OpenSans",src:"http://yun.media.bztone.com/prezi/asensio/font/OpenSans.ttf"},{name:"SourceHanSansCN",src:"http://yun.media.bztone.com/prezi/asensio/font/asensio.ttf"}],main:{x:1920,y:1080,scale:1,son:[],content:[]}},c=null,s=[],u=[];function f(e){var t="rect";switch(e){case MSTextLayer:t="text";break;case MSBitmapLayer:t="image"}return t}function d(e,t,r){var n=e.style(),i=null;n.fills().length>0&&(i=n.fills()[0]);var o=null;n.borders().length>0&&(o=n.borders()[0]);var l=e.class();if(l===MSTextLayer){var c=e.textColor();t.data=Object.assign(t.data,{type:f(l),text:e.stringValue()+"",fontFamily:e.font().fontName()+"",fontSize:e.fontSize()/r,fill:a.rgb2hex(c.red(),c.green(),c.blue(),c.alpha()),lineHeight:e.lineHeight(),leading:e.leading(),align:1===e.textAlignment()?"right":2===e.textAlignment()?"center":"left",wordWrap:!0,breakWords:!1,wordWrapWith:null})}if(l===MSRectangleShape&&(t.data=Object.assign(t.data,{type:f(l),radius:e.cornerRadiusFloat()/r}),t.data=Object.assign(t.data,{fill:i?a.rgb2hex(i.color().red(),i.color().green(),i.color().blue()):"0xFFFFFF",opacity:i?i.color().alpha():1}),o&&(t.data=Object.assign(t.data,{lineWidth:o.thickness()/r,lineColor:a.rgb2hex(o.color().red(),o.color().green(),o.color().blue()),lineOpacity:o.color().alpha(),lineAlign:"Inside"===o.position()?1:"Center"===o.position()?.5:0}))),l===MSBitmapLayer){var s=e.name(),u=S(e);t.data=Object.assign(t.data,{type:f(l),src:"http://pixi.bztone.com/"+function(e){return e.replace("_overSon","")}(s)+"."+(u||"JPG")})}if(l===MSLayerGroup){var d=S(e);d&&(t.data=Object.assign(t.data,{type:f(MSBitmapLayer),src:"http://pixi.bztone.com/"+e.name()+"."+(d||"JPG")}))}return t}function S(e){var t=null,r=e.exportOptions().exportFormats();return r&&r.length>0&&(t=r[0].fileFormat()),t}t.default=function(e){var t=(c=e).document.pages();t.forEach(function(e){e.layers().forEach(function(e){u.push(e),e.layers().forEach(function(e){return s.push(e)})})}),console.log("allLayers length : "+s.length),console.log("allArtboards length : "+u.length),t.forEach(function(e,t){(function e(t,r){console.log("artboard name : "+t.name());i.message("正在转换 : "+t.name());var n=r.scale;var a=t.layers();a.forEach(function(t){var i=t.class(),c=t.name();console.log("layer name : "+c);var s=S(t);if("BG"==c)l.background="http://pixi.bztone.com/"+c+"."+(s||"JPG");else if(-1!=o.indexOf(i)&&1==t.isVisible())if(t.flow()&&t.flow().destinationArtboardID()){if(i===MSHotspotLayer){var p=t.flow().destinationArtboardID(),m=function(e){for(var t=null,r=0;r<u.length;r++){var n=u[r];if(""+n.objectID()==""+e){t=n;break}}return t}(p);if(console.log(m),m){var h=function(e,t){for(var r=null,n=0;n<e.length;n++){var a=e[n],i=a.class();if(i!=MSHotspotLayer&&a.flow()&&a.flow().destinationArtboardID()&&""+a.flow().destinationArtboardID()==""+t){r=a;break}}return r}(a,p);console.log(h);var g={x:t.frame().left(),y:t.frame().top(),scale:m.frame().width()/t.frame().width(),son:[],content:[]};if(h){console.log("sonLayer : "+h.name());var b={x:(h.frame().left()-g.x)*g.scale,y:(h.frame().top()-g.y)*g.scale,width:h.frame().width()*g.scale,height:h.frame().height()*g.scale,data:{type:f(h.class()),look:"son"}};b=d(h,b,1/n),g.content.push(b)}e(m,g),r.son.push(g)}}}else{var v=t.frame(),y={x:v.left(),y:v.top(),width:v.width(),height:v.height(),data:{look:"in",overSon:function(e){return-1!=e.indexOf("_overSon")}(t.name())}};t.rotation()&&(y.data.angle=t.rotation()),y=d(t,y,1),r.content.push(y)}})})(e.layers()[0],l.main);var r=function(e){var t=e.scriptPath.split("/");return t.pop(),t.join("/")}(c)+"/pixi.json";n.writeFileSync(r,JSON.stringify(l)),i.message("转换完成!")})}},"./src/util.js":
/*!*********************!*\
  !*** ./src/util.js ***!
  \*********************/
/*! no static exports found */function(e,t){t.getAlphaFromHex=function(e){var t=1;return 8===(e=e.replace(/^#/,"")).length&&(t=parseInt(e.slice(6,8),16)/255),t},t.getColor=function(e){var t="";return 8===(e=e.replace(/^#/,"")).length&&(t=e.slice(0,6)),"0x"+t},t.rgb2hex=function(e,t,r,n){e=parseInt(255*e),t=parseInt(255*t),r=parseInt(255*r);var a=(e+(n||"")).toString().includes("%");if("number"==typeof n){if(!a&&n>=0&&n<=1)n=Math.round(255*n);else{if(!(a&&n>=0&&n<=100))throw new TypeError("Expected alpha value (".concat(n,") as a fraction or percentage"));n=Math.round(255*n/100)}n=(256|n).toString(16).slice(1)}else n="";return"0x"+((r|t<<8|e<<16|1<<24).toString(16).slice(1)+n)}},buffer:
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=require("buffer")},"sketch/ui":
/*!****************************!*\
  !*** external "sketch/ui" ***!
  \****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/ui")}});"default"===e&&"function"==typeof r?r(t):r[e](t)}that.onRun=__skpm_run.bind(this,"default");